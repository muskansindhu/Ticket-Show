{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"ShowBookingPage\",\n  data() {\n    return {\n      formData: {\n        show_name: \"\",\n        rating: \"\",\n        time: \"\",\n        price: \"\"\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null\n    };\n  },\n  created() {\n    this.populateForm();\n  },\n  computed: {\n    totalPrice() {\n      if (this.formData.tickets_booked) {\n        return this.formData.price * this.formData.tickets_booked;\n      } else {\n        return 0;\n      }\n    }\n  },\n  methods: {\n    async getShow() {\n      try {\n        const show_id = this.$route.params.id;\n        const response = await axios.get(`http://127.0.0.1:1234/vue/theater/show/${show_id}`);\n        return response.data;\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show details not available\");\n      }\n    },\n    async populateForm() {\n      try {\n        const show = await this.getShow();\n        if (show && show.show_name) {\n          this.formData.show_name = show.show_name;\n          this.formData.price = show.price;\n          this.formData.time = show.time;\n          this.formData.rating = show.rating;\n        } else {\n          // Handle the case where show data is missing or invalid\n          console.error(\"Show data is missing or invalid\");\n          // You might want to show an error message to the user or take other actions.\n        }\n      } catch (error) {\n        console.error(\"Error while populating form:\", error);\n      }\n    },\n    async submitBooking() {\n      try {\n        const show_id = this.$route.params.id;\n        const bookingData = new FormData();\n        bookingData.append(\"show_id\", show_id);\n        bookingData.append(\"tickets_booked\", this.formData.tickets_booked);\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${this.userSession.token}`;\n          const response = await axios.post(\"http://127.0.0.1:1234/vue/booking\", bookingData);\n          console.log(response);\n          alert(\"Booking Done Succesfully.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred while confirming the booking.\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","formData","show_name","rating","time","price","userSession","JSON","parse","localStorage","getItem","created","populateForm","computed","totalPrice","tickets_booked","methods","getShow","show_id","$route","params","id","response","get","error","console","message","alert","show","submitBooking","bookingData","FormData","append","token","defaults","headers","common","post","log"],"sources":["src/components/ShowBooking.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-5 pt-5 justify-content-center\">\n      <div class=\"row\">\n        <div class=\"col-md-6 mx-auto\">\n          <div class=\"card\">\n            <div class=\"card-body text-center\">\n              <h3>Show Booking</h3>\n              <form @submit.prevent=\"submitBooking\">\n                <input\n                  type=\"text\"\n                  name=\"show_name\"\n                  id=\"show_name\"\n                  placeholder=\"Show Name\"\n                  required\n                  class=\"form-control my-4 py-2\"\n                  v-model=\"formData.show_name\"\n                  readonly\n                />\n                <input\n                  type=\"text\"\n                  name=\"rating\"\n                  id=\"rating\"\n                  placeholder=\"Rating\"\n                  required\n                  class=\"form-control my-4 py-2\"\n                  v-model=\"formData.rating\"\n                  readonly\n                />\n                <input\n                  type=\"text\"\n                  name=\"time\"\n                  id=\"time\"\n                  placeholder=\"Time\"\n                  required\n                  class=\"form-control my-4 py-2\"\n                  v-model=\"formData.time\"\n                  readonly\n                />\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"1\"\n                  name=\"price\"\n                  id=\"price\"\n                  placeholder=\"Price\"\n                  required\n                  class=\"form-control my-4 py-2\"\n                  v-model=\"formData.price\"\n                  readonly\n                />\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  step=\"1\"\n                  name=\"tickets_booked\"\n                  id=\"tickets_booked\"\n                  placeholder=\"Number of Seats\"\n                  required\n                  class=\"form-control my-4 py-2\"\n                  v-model=\"formData.tickets_booked\"\n                />\n                <p>Total Payable Amount: {{ totalPrice }}</p>\n                <input\n                  type=\"submit\"\n                  value=\"Confirm Booking\"\n                  class=\"btn btn-success\"\n                />\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"ShowBookingPage\",\n  data() {\n    return {\n      formData: {\n        show_name: \"\",\n        rating: \"\",\n        time: \"\",\n        price: \"\",\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null,\n    };\n  },\n  created() {\n    this.populateForm();\n  },\n  computed: {\n    totalPrice() {\n      if (this.formData.tickets_booked) {\n        return this.formData.price * this.formData.tickets_booked;\n      } else {\n        return 0;\n      }\n    },\n  },\n  methods: {\n    async getShow() {\n      try {\n        const show_id = this.$route.params.id;\n        const response = await axios.get(\n          `http://127.0.0.1:1234/vue/theater/show/${show_id}`\n        );\n        return response.data;\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show details not available\");\n      }\n    },\n\n    async populateForm() {\n      try {\n        const show = await this.getShow();\n\n        if (show && show.show_name) {\n          this.formData.show_name = show.show_name;\n          this.formData.price = show.price;\n          this.formData.time = show.time;\n          this.formData.rating = show.rating;\n        } else {\n          // Handle the case where show data is missing or invalid\n          console.error(\"Show data is missing or invalid\");\n          // You might want to show an error message to the user or take other actions.\n        }\n      } catch (error) {\n        console.error(\"Error while populating form:\", error);\n      }\n    },\n\n    async submitBooking() {\n      try {\n        const show_id = this.$route.params.id;\n        const bookingData = new FormData();\n        bookingData.append(\"show_id\", show_id);\n        bookingData.append(\"tickets_booked\", this.formData.tickets_booked);\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\n            \"Authorization\"\n          ] = `Bearer ${this.userSession.token}`;\n          const response = await axios.post(\n            \"http://127.0.0.1:1234/vue/booking\",\n            bookingData\n          );\n          console.log(response);\n          alert(\"Booking Done Succesfully.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred while confirming the booking.\");\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"AA8EA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,SAAA;QACAC,MAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,WAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,QAAA;IACAC,WAAA;MACA,SAAAb,QAAA,CAAAc,cAAA;QACA,YAAAd,QAAA,CAAAI,KAAA,QAAAJ,QAAA,CAAAc,cAAA;MACA;QACA;MACA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,QAAA;MACA;QACA,MAAAC,OAAA,QAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;QACA,MAAAC,QAAA,SAAAxB,KAAA,CAAAyB,GAAA,CACA,0CAAAL,OAAA,EACA;QACA,OAAAI,QAAA,CAAAtB,IAAA;MACA,SAAAwB,KAAA;QACAC,OAAA,CAAAD,KAAA,gBAAAA,KAAA;QAEA,IAAAA,KAAA,CAAAF,QAAA;UACAG,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAF,QAAA,CAAAtB,IAAA;QACA;UACAyB,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAE,OAAA;QACA;QACAC,KAAA;MACA;IACA;IAEA,MAAAf,aAAA;MACA;QACA,MAAAgB,IAAA,cAAAX,OAAA;QAEA,IAAAW,IAAA,IAAAA,IAAA,CAAA1B,SAAA;UACA,KAAAD,QAAA,CAAAC,SAAA,GAAA0B,IAAA,CAAA1B,SAAA;UACA,KAAAD,QAAA,CAAAI,KAAA,GAAAuB,IAAA,CAAAvB,KAAA;UACA,KAAAJ,QAAA,CAAAG,IAAA,GAAAwB,IAAA,CAAAxB,IAAA;UACA,KAAAH,QAAA,CAAAE,MAAA,GAAAyB,IAAA,CAAAzB,MAAA;QACA;UACA;UACAsB,OAAA,CAAAD,KAAA;UACA;QACA;MACA,SAAAA,KAAA;QACAC,OAAA,CAAAD,KAAA,iCAAAA,KAAA;MACA;IACA;IAEA,MAAAK,cAAA;MACA;QACA,MAAAX,OAAA,QAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;QACA,MAAAS,WAAA,OAAAC,QAAA;QACAD,WAAA,CAAAE,MAAA,YAAAd,OAAA;QACAY,WAAA,CAAAE,MAAA,wBAAA/B,QAAA,CAAAc,cAAA;QACA,SAAAT,WAAA,SAAAA,WAAA,CAAA2B,KAAA;UACAnC,KAAA,CAAAoC,QAAA,CAAAC,OAAA,CAAAC,MAAA,CACA,gBACA,kBAAA9B,WAAA,CAAA2B,KAAA;UACA,MAAAX,QAAA,SAAAxB,KAAA,CAAAuC,IAAA,CACA,qCACAP,WACA;UACAL,OAAA,CAAAa,GAAA,CAAAhB,QAAA;UACAK,KAAA;QACA;MACA,SAAAH,KAAA;QACAC,OAAA,CAAAD,KAAA,gBAAAA,KAAA;QAEA,IAAAA,KAAA,CAAAF,QAAA;UACAG,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAF,QAAA,CAAAtB,IAAA;QACA;UACAyB,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAE,OAAA;QACA;QACAC,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}