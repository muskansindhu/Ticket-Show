{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"AdminEditShowPage\",\n  data() {\n    return {\n      formData: {\n        show_name: null,\n        price: null,\n        tags: null,\n        time: null,\n        rating: null,\n        show_id: null\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null\n    };\n  },\n  methods: {\n    async editShowForm() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${this.userSession.token}`;\n          const formData = new FormData();\n          const show_id = this.$route.params.id;\n          formData.append(\"show_name\", this.formData.show_name);\n          formData.append(\"time\", this.formData.time);\n          formData.append(\"tags\", this.formData.tags);\n          formData.append(\"price\", this.formData.price);\n          formData.append(\"rating\", this.formData.rating);\n          formData.append(\"show_id\", show_id);\n          console.log(formData);\n\n          // Send the formData to the server for updating\n          const response = await axios.put(\"http://127.0.0.1:1234/vue/show\", formData);\n\n          // Update this.formData with the new values from the form fields\n          this.formData.show_name = formData.get(\"show_name\");\n          this.formData.time = formData.get(\"time\");\n          this.formData.tags = formData.get(\"tags\");\n          this.formData.price = formData.get(\"price\");\n          this.formData.rating = formData.get(\"rating\");\n          alert(\" Show was updated successfully.\");\n          console.log(response);\n        } else {\n          console.error(\"User is not authenticated.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not edited.\");\n      }\n    },\n    deleteShow() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          // Set the Authorization header with the JWT token\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${this.userSession.token}`;\n          const show_id = this.$route.params.id;\n          const response = axios.delete(`http://127.0.0.1:1234/vue/show/${show_id}`);\n          console.log(response);\n          alert(\"Show deleted Successfully\");\n          this.$router.push({\n            name: \"admin-dash\"\n          });\n        } else {\n          // Handle the case where the user is not authenticated\n          console.error(\"User is not authenticated.\");\n          // You can redirect to the login page or show an error message here\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not deleted.\");\n      }\n    }\n  },\n  created() {\n    const id = this.$route.params.id;\n    axios.get(`http://127.0.0.1:1234/vue/theater/show/${id}`).then(response => {\n      const showData = response.data;\n      this.formData.show_name = showData.show_name;\n      this.formData.time = showData.time;\n      this.formData.tags = showData.tags;\n      this.formData.price = showData.price;\n      this.formData.rating = showData.rating;\n      this.formData.show_id = showData.show_id;\n    }).catch(error => {\n      console.error(\"Error fetching data:\", error);\n    });\n  }\n};","map":{"version":3,"names":["axios","name","data","formData","show_name","price","tags","time","rating","show_id","userSession","JSON","parse","localStorage","getItem","methods","editShowForm","token","defaults","headers","common","FormData","$route","params","id","append","console","log","response","put","get","alert","error","message","deleteShow","delete","$router","push","created","then","showData","catch"],"sources":["src/components/AdminEditShow.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-5 pt-5 justify-content-center\">\n      <div class=\"row\">\n        <div class=\"col-md-6 mx-auto\">\n          <div class=\"card\">\n            <div class=\"card-body text-center\">\n              <h3>Edit Show</h3>\n              <form>\n                <input\n                  type=\"text\"\n                  name=\"show_name\"\n                  id=\"show_name\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Show Name\"\n                  v-model=\"formData.show_name\"\n                  required\n                />\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"5\"\n                  name=\"rating\"\n                  id=\"rating\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Ratings\"\n                  v-model=\"formData.rating\"\n                  required\n                />\n                <input\n                  type=\"text\"\n                  name=\"tags\"\n                  id=\"tags\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Tags\"\n                  v-model=\"formData.tags\"\n                  required\n                />\n                <input\n                  type=\"text\"\n                  name=\"time\"\n                  id=\"time\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Time\"\n                  v-model=\"formData.time\"\n                  required\n                />\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  name=\"price\"\n                  id=\"price\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Price\"\n                  v-model=\"formData.price\"\n                  required\n                />\n                <!--\n                  <label for=\"poster\">Choose a poster for your show:</label>\n                  <input\n                    type=\"file\"\n                    name=\"poster\"\n                    id=\"poster\"\n                    class=\"form-control my-4 py-2\"\n                    placeholder=\"Show Poster\"\n                    required\n                  />\n                  -->\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-success\"\n                  @click=\"editShowForm\"\n                >\n                  Edit\n                </button>\n                &nbsp;\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger\"\n                  @click=\"deleteShow\"\n                >\n                  Delete\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"AdminEditShowPage\",\n  data() {\n    return {\n      formData: {\n        show_name: null,\n        price: null,\n        tags: null,\n        time: null,\n        rating: null,\n        show_id: null,\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null,\n    };\n  },\n  methods: {\n    async editShowForm() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\n            \"Authorization\"\n          ] = `Bearer ${this.userSession.token}`;\n          const formData = new FormData();\n          const show_id = this.$route.params.id;\n          formData.append(\"show_name\", this.formData.show_name);\n          formData.append(\"time\", this.formData.time);\n          formData.append(\"tags\", this.formData.tags);\n          formData.append(\"price\", this.formData.price);\n          formData.append(\"rating\", this.formData.rating);\n          formData.append(\"show_id\", show_id);\n          console.log(formData);\n\n          // Send the formData to the server for updating\n          const response = await axios.put(\n            \"http://127.0.0.1:1234/vue/show\",\n            formData\n          );\n\n          // Update this.formData with the new values from the form fields\n          this.formData.show_name = formData.get(\"show_name\");\n          this.formData.time = formData.get(\"time\");\n          this.formData.tags = formData.get(\"tags\");\n          this.formData.price = formData.get(\"price\");\n          this.formData.rating = formData.get(\"rating\");\n\n          alert(\" Show was updated successfully.\");\n          console.log(response);\n        } else {\n          console.error(\"User is not authenticated.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not edited.\");\n      }\n    },\n    deleteShow() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          // Set the Authorization header with the JWT token\n          axios.defaults.headers.common[\n            \"Authorization\"\n          ] = `Bearer ${this.userSession.token}`;\n          const show_id = this.$route.params.id;\n          const response = axios.delete(\n            `http://127.0.0.1:1234/vue/show/${show_id}`\n          );\n          console.log(response);\n          alert(\"Show deleted Successfully\");\n          this.$router.push({ name: \"admin-dash\" });\n        } else {\n          // Handle the case where the user is not authenticated\n          console.error(\"User is not authenticated.\");\n          // You can redirect to the login page or show an error message here\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not deleted.\");\n      }\n    },\n  },\n  created() {\n    const id = this.$route.params.id;\n    axios\n      .get(`http://127.0.0.1:1234/vue/theater/show/${id}`)\n      .then((response) => {\n        const showData = response.data;\n        this.formData.show_name = showData.show_name;\n        this.formData.time = showData.time;\n        this.formData.tags = showData.tags;\n        this.formData.price = showData.price;\n        this.formData.rating = showData.rating;\n        this.formData.show_id = showData.show_id;\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data:\", error);\n      });\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}