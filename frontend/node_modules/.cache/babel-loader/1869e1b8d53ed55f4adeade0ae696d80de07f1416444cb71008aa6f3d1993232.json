{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"RateShowPage\",\n  data() {\n    return {\n      formData: {\n        rating: \"\",\n        show_name: \"\"\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null\n    };\n  },\n  created() {\n    this.populateForm();\n  },\n  methods: {\n    async getShow() {\n      try {\n        const show_id = this.$route.params.id;\n        const response = await axios.get(`http://127.0.0.1:1234/vue/theater/show/${show_id}`);\n        return response.data;\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show details not available\");\n      }\n    },\n    async populateForm() {\n      try {\n        const show = await this.getShow();\n        if (show && show.show_name) {\n          this.formData.show_name = show.show_name;\n        } else {\n          console.error(\"Show data is missing or invalid\");\n        }\n      } catch (error) {\n        console.error(\"Error while populating form:\", error);\n      }\n    },\n    async submitBooking() {\n      try {\n        const bookingData = new FormData();\n        bookingData.append(\"rating\", this.formData.rating);\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${this.userSession.token}`;\n          const id = this.$route.params.id;\n          const response = await axios.put(`http://127.0.0.1:1234/vue/rate/${id}`, bookingData);\n          console.log(response);\n          alert(\"Thank you for rating the show!\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred while confirming the booking.\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","formData","rating","show_name","userSession","JSON","parse","localStorage","getItem","created","populateForm","methods","getShow","show_id","$route","params","id","response","get","error","console","message","alert","show","submitBooking","bookingData","FormData","append","token","defaults","headers","common","put","log"],"sources":["src/components/RateShow.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-5 pt-5 justify-content-center\">\n    <div class=\"row\">\n      <div class=\"col-md-6 mx-auto\">\n        <div class=\"card\">\n          <div class=\"card-body text-center\">\n            <form @submit.prevent=\"submitBooking\">\n              <h3>Rate Show</h3>\n              <input\n                type=\"text\"\n                name=\"show_name\"\n                id=\"show_name\"\n                class=\"form-control my-4 py-2\"\n                placeholder=\"Show Name\"\n                v-model=\"formData.show_name\"\n                readonly\n                required\n              />\n              <input\n                type=\"number\"\n                name=\"rate\"\n                id=\"rate\"\n                max=\"5\"\n                min=\"1\"\n                class=\"form-control my-4 py-2\"\n                placeholder=\"Rate\"\n                v-model=\"formData.rating\"\n                required\n              />\n              <input type=\"submit\" value=\"Rate Show\" class=\"btn btn-success\" />\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"RateShowPage\",\n  data() {\n    return {\n      formData: {\n        rating: \"\",\n        show_name: \"\",\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null,\n    };\n  },\n  created() {\n    this.populateForm();\n  },\n  methods: {\n    async getShow() {\n      try {\n        const show_id = this.$route.params.id;\n        const response = await axios.get(\n          `http://127.0.0.1:1234/vue/theater/show/${show_id}`\n        );\n        return response.data;\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show details not available\");\n      }\n    },\n    async populateForm() {\n      try {\n        const show = await this.getShow();\n        if (show && show.show_name) {\n          this.formData.show_name = show.show_name;\n        } else {\n          console.error(\"Show data is missing or invalid\");\n        }\n      } catch (error) {\n        console.error(\"Error while populating form:\", error);\n      }\n    },\n    async submitBooking() {\n      try {\n        const bookingData = new FormData();\n        bookingData.append(\"rating\", this.formData.rating);\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\n            \"Authorization\"\n          ] = `Bearer ${this.userSession.token}`;\n          const id = this.$route.params.id;\n          const response = await axios.put(\n            `http://127.0.0.1:1234/vue/rate/${id}`,\n            bookingData\n          );\n          console.log(response);\n          alert(\"Thank you for rating the show!\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred while confirming the booking.\");\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"AAuCA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,MAAA;QACAC,SAAA;MACA;MACAC,WAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA,MAAAC,QAAA;MACA;QACA,MAAAC,OAAA,QAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;QACA,MAAAC,QAAA,SAAAnB,KAAA,CAAAoB,GAAA,CACA,0CAAAL,OAAA,EACA;QACA,OAAAI,QAAA,CAAAjB,IAAA;MACA,SAAAmB,KAAA;QACAC,OAAA,CAAAD,KAAA,gBAAAA,KAAA;QAEA,IAAAA,KAAA,CAAAF,QAAA;UACAG,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAF,QAAA,CAAAjB,IAAA;QACA;UACAoB,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAE,OAAA;QACA;QACAC,KAAA;MACA;IACA;IACA,MAAAZ,aAAA;MACA;QACA,MAAAa,IAAA,cAAAX,OAAA;QACA,IAAAW,IAAA,IAAAA,IAAA,CAAApB,SAAA;UACA,KAAAF,QAAA,CAAAE,SAAA,GAAAoB,IAAA,CAAApB,SAAA;QACA;UACAiB,OAAA,CAAAD,KAAA;QACA;MACA,SAAAA,KAAA;QACAC,OAAA,CAAAD,KAAA,iCAAAA,KAAA;MACA;IACA;IACA,MAAAK,cAAA;MACA;QACA,MAAAC,WAAA,OAAAC,QAAA;QACAD,WAAA,CAAAE,MAAA,gBAAA1B,QAAA,CAAAC,MAAA;QACA,SAAAE,WAAA,SAAAA,WAAA,CAAAwB,KAAA;UACA9B,KAAA,CAAA+B,QAAA,CAAAC,OAAA,CAAAC,MAAA,CACA,gBACA,kBAAA3B,WAAA,CAAAwB,KAAA;UACA,MAAAZ,EAAA,QAAAF,MAAA,CAAAC,MAAA,CAAAC,EAAA;UACA,MAAAC,QAAA,SAAAnB,KAAA,CAAAkC,GAAA,CACA,kCAAAhB,EAAA,IACAS,WACA;UACAL,OAAA,CAAAa,GAAA,CAAAhB,QAAA;UACAK,KAAA;QACA;MACA,SAAAH,KAAA;QACAC,OAAA,CAAAD,KAAA,gBAAAA,KAAA;QAEA,IAAAA,KAAA,CAAAF,QAAA;UACAG,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAF,QAAA,CAAAjB,IAAA;QACA;UACAoB,OAAA,CAAAD,KAAA,mBAAAA,KAAA,CAAAE,OAAA;QACA;QACAC,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}