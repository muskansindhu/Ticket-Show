{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"UserDashPage\",\n  data() {\n    return {\n      theaters: [],\n      formData: {\n        theater_name: \"\",\n        location: \"\",\n        capacity: \"\"\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null\n    };\n  },\n  methods: {\n    async getTheater() {\n      const path = \"http://127.0.0.1:1234/vue/all/theater\";\n      try {\n        const response = await axios.get(path);\n        this.theaters = response.data.theaters;\n        this.loadShowsForTheaters();\n      } catch (error) {\n        console.error(\"Error fetching theaters:\", error);\n      }\n    },\n    async getShowsForTheater(theater) {\n      const path = `http://127.0.0.1:1234/vue/theater/${theater.roll}/show`;\n      try {\n        const response = await axios.get(path);\n        this.$set(theater, \"shows\", response.data.show);\n      } catch (error) {\n        console.error(`Error fetching shows for theater ${theater.roll}:`, error);\n      }\n    },\n    loadShowsForTheaters() {\n      for (const theater of this.theaters) {\n        this.getShowsForTheater(theater);\n      }\n    },\n    posterImg(showName) {\n      return `http://127.0.0.1:1234/static/img/Posters/${showName}.webp`;\n    },\n    availableSeats(theaterCapacity, showSeatsBooked) {\n      return theaterCapacity - showSeatsBooked;\n    }\n  },\n  async created() {\n    await this.getTheater();\n  }\n};","map":{"version":3,"names":["axios","name","data","theaters","formData","theater_name","location","capacity","userSession","JSON","parse","localStorage","getItem","methods","getTheater","path","response","get","loadShowsForTheaters","error","console","getShowsForTheater","theater","roll","$set","show","posterImg","showName","availableSeats","theaterCapacity","showSeatsBooked","created"],"sources":["src/components/UserDash.vue"],"sourcesContent":["<template>\n  <div>\n    <br />\n    <br />\n    <div class=\"text-center\">\n      <h6>\n        Welcome to Ticket-Show, your one stop destination for booking shows.\n      </h6>\n    </div>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-10\" v-for=\"(theater, index) in theaters\" :key=\"index\">\n        <br />\n        <div class=\"card mb-3\">\n          <div class=\"card-header d-flex justify-content-between\">\n            <div class=\"d-flex justify-content-between align-items-baseline\">\n              <div>\n                <h5 class=\"card-title\">{{ theater.theater_name }},</h5>\n              </div>\n              &nbsp;\n              <div>\n                <h6>{{ theater.location }},</h6>\n              </div>\n              &nbsp;\n              <div>\n                <h6><strong>Capacity:</strong> {{ theater.capacity }}</h6>\n              </div>\n            </div>\n          </div>\n          <div>\n            <div class=\"card-body\">\n              <!-- Show cards -->\n              <div class=\"row\" v-if=\"theater.shows && theater.shows.length > 0\">\n                <div\n                  class=\"col-md-4\"\n                  v-for=\"(show, showIndex) in theater.shows\"\n                  :key=\"showIndex\"\n                >\n                  <div class=\"card mb-3\">\n                    <div class=\"card-body text-center\">\n                      <div>\n                        <img\n                          :src=\"posterImg(show.show_name)\"\n                          alt=\"Image\"\n                          class=\"card-img-top w-100\"\n                          style=\"max-height: 400px; max-width: 100%\"\n                        />\n                      </div>\n                      <h6 class=\"card-title\">{{ show.show_name }}</h6>\n                      <p class=\"card-text\">\n                        <strong>Show Time:</strong> {{ show.time }}\n                      </p>\n                      <p class=\"card-text\">\n                        <strong>Available Seats:</strong>\n                        {{\n                          availableSeats(theater.capacity, show.seats_booked)\n                        }}\n                      </p>\n                      <template\n                        v-if=\"\n                          availableSeats(theater.capacity, show.seats_booked) >\n                          0\n                        \"\n                      >\n                        <a\n                          :href=\"'/show/' + show.roll + '/booking'\"\n                          class=\"btn btn-outline-success btn-sm\"\n                        >\n                          Book now\n                        </a>\n                      </template>\n                      <template v-else>\n                        <button class=\"btn btn-outline-danger btn-sm\" disabled>\n                          Housefull\n                        </button>\n                      </template>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <p v-else>No shows available for this theater.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"UserDashPage\",\n  data() {\n    return {\n      theaters: [],\n      formData: {\n        theater_name: \"\",\n        location: \"\",\n        capacity: \"\",\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null,\n    };\n  },\n  methods: {\n    async getTheater() {\n      const path = \"http://127.0.0.1:1234/vue/all/theater\";\n      try {\n        const response = await axios.get(path);\n        this.theaters = response.data.theaters;\n        this.loadShowsForTheaters();\n      } catch (error) {\n        console.error(\"Error fetching theaters:\", error);\n      }\n    },\n\n    async getShowsForTheater(theater) {\n      const path = `http://127.0.0.1:1234/vue/theater/${theater.roll}/show`;\n      try {\n        const response = await axios.get(path);\n        this.$set(theater, \"shows\", response.data.show);\n      } catch (error) {\n        console.error(\n          `Error fetching shows for theater ${theater.roll}:`,\n          error\n        );\n      }\n    },\n\n    loadShowsForTheaters() {\n      for (const theater of this.theaters) {\n        this.getShowsForTheater(theater);\n      }\n    },\n    posterImg(showName) {\n      return `http://127.0.0.1:1234/static/img/Posters/${showName}.webp`;\n    },\n    availableSeats(theaterCapacity, showSeatsBooked) {\n      return theaterCapacity - showSeatsBooked;\n    },\n  },\n  async created() {\n    await this.getTheater();\n  },\n};\n</script>\n"],"mappings":"AAyFA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;QACAC,YAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,WAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,WAAA;MACA,MAAAC,IAAA;MACA;QACA,MAAAC,QAAA,SAAAhB,KAAA,CAAAiB,GAAA,CAAAF,IAAA;QACA,KAAAZ,QAAA,GAAAa,QAAA,CAAAd,IAAA,CAAAC,QAAA;QACA,KAAAe,oBAAA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,6BAAAA,KAAA;MACA;IACA;IAEA,MAAAE,mBAAAC,OAAA;MACA,MAAAP,IAAA,wCAAAO,OAAA,CAAAC,IAAA;MACA;QACA,MAAAP,QAAA,SAAAhB,KAAA,CAAAiB,GAAA,CAAAF,IAAA;QACA,KAAAS,IAAA,CAAAF,OAAA,WAAAN,QAAA,CAAAd,IAAA,CAAAuB,IAAA;MACA,SAAAN,KAAA;QACAC,OAAA,CAAAD,KAAA,CACA,oCAAAG,OAAA,CAAAC,IAAA,KACAJ,KACA;MACA;IACA;IAEAD,qBAAA;MACA,WAAAI,OAAA,SAAAnB,QAAA;QACA,KAAAkB,kBAAA,CAAAC,OAAA;MACA;IACA;IACAI,UAAAC,QAAA;MACA,mDAAAA,QAAA;IACA;IACAC,eAAAC,eAAA,EAAAC,eAAA;MACA,OAAAD,eAAA,GAAAC,eAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,WAAAjB,UAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}