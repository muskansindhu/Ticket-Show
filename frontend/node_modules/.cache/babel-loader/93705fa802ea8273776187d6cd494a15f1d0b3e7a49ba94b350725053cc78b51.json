{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"AdminAddShowPage\",\n  data() {\n    return {\n      formData: {\n        show_name: \"\",\n        price: \"\",\n        tags: \"\",\n        time: \"\",\n        rating: \"\",\n        theater_id: \"\",\n        poster: null\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null\n    };\n  },\n  methods: {\n    async addShowForm() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${this.userSession.token}`;\n          const theater_id = this.$route.params.id;\n          const formData = new FormData();\n          formData.append(\"show_name\", this.formData.show_name);\n          formData.append(\"time\", this.formData.time);\n          formData.append(\"tags\", this.formData.tags);\n          formData.append(\"price\", this.formData.price);\n          formData.append(\"rating\", this.formData.rating);\n          formData.append(\"poster\", this.formData.poster);\n          formData.append(\"theater_id\", theater_id);\n          console.log(formData);\n          const response = await axios.post(\"http://127.0.0.1:1234/vue/show\", formData);\n          console.log(response);\n          alert(\" Show was added successfully.\");\n        } else {\n          console.error(\"User is not authenticated.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not added.\");\n      }\n    },\n    handleFileUpload(event) {\n      const file = event.target.files[0]; // Get the first selected file\n      this.formData.poster = file; // Assign the file to 'formData.poster'\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","formData","show_name","price","tags","time","rating","theater_id","poster","userSession","JSON","parse","localStorage","getItem","methods","addShowForm","token","defaults","headers","common","$route","params","id","FormData","append","console","log","response","post","alert","error","message","handleFileUpload","event","file","target","files"],"sources":["src/components/AdminAddShow.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-5 pt-5 justify-content-center\">\n      <div class=\"row\">\n        <div class=\"col-md-6 mx-auto\">\n          <div class=\"card\">\n            <div class=\"card-body text-center\">\n              <h3>Add Show</h3>\n              <form>\n                <input\n                  type=\"text\"\n                  name=\"show_name\"\n                  id=\"show_name\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Show Name\"\n                  v-model=\"formData.show_name\"\n                  required\n                />\n                <input type=\"hidden\" name=\"venue_id\" />\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"5\"\n                  name=\"rating\"\n                  id=\"rating\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Ratings\"\n                  v-model=\"formData.rating\"\n                  required\n                />\n                <input\n                  type=\"text\"\n                  name=\"tags\"\n                  id=\"tags\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Tags\"\n                  v-model=\"formData.tags\"\n                  required\n                />\n                <input\n                  type=\"text\"\n                  name=\"time\"\n                  id=\"time\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Time\"\n                  v-model=\"formData.time\"\n                  required\n                />\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  name=\"price\"\n                  id=\"price\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Price\"\n                  v-model=\"formData.price\"\n                  required\n                />\n\n                <label for=\"poster\">Choose a poster for your show:</label>\n                <input\n                  type=\"file\"\n                  name=\"poster\"\n                  id=\"poster\"\n                  class=\"form-control my-4 py-2\"\n                  placeholder=\"Show Poster\"\n                  @change=\"handleFileUpload\"\n                  required\n                />\n\n                <input\n                  type=\"submit\"\n                  value=\"Submit\"\n                  class=\"btn btn-success\"\n                  @click=\"addShowForm\"\n                />\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AdminAddShowPage\",\n  data() {\n    return {\n      formData: {\n        show_name: \"\",\n        price: \"\",\n        tags: \"\",\n        time: \"\",\n        rating: \"\",\n        theater_id: \"\",\n        poster: null,\n      },\n      userSession: JSON.parse(localStorage.getItem(\"userSession\")) || null,\n    };\n  },\n  methods: {\n    async addShowForm() {\n      try {\n        if (this.userSession && this.userSession.token) {\n          axios.defaults.headers.common[\n            \"Authorization\"\n          ] = `Bearer ${this.userSession.token}`;\n          const theater_id = this.$route.params.id;\n          const formData = new FormData();\n          formData.append(\"show_name\", this.formData.show_name);\n          formData.append(\"time\", this.formData.time);\n          formData.append(\"tags\", this.formData.tags);\n          formData.append(\"price\", this.formData.price);\n          formData.append(\"rating\", this.formData.rating);\n          formData.append(\"poster\", this.formData.poster);\n          formData.append(\"theater_id\", theater_id);\n          console.log(formData);\n          const response = await axios.post(\n            \"http://127.0.0.1:1234/vue/show\",\n            formData\n          );\n          console.log(response);\n          alert(\" Show was added successfully.\");\n        } else {\n          console.error(\"User is not authenticated.\");\n        }\n      } catch (error) {\n        console.error(\"AxiosError:\", error);\n\n        if (error.response) {\n          console.error(\"Response Data:\", error.response.data);\n        } else {\n          console.error(\"Network Error:\", error.message);\n        }\n        alert(\"Oops! An error occurred. Show was not added.\");\n      }\n    },\n    handleFileUpload(event) {\n      const file = event.target.files[0]; // Get the first selected file\n      this.formData.poster = file; // Assign the file to 'formData.poster'\n    },\n  },\n};\n</script>\n"],"mappings":"AAsFA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,SAAA;QACAC,KAAA;QACAC,IAAA;QACAC,IAAA;QACAC,MAAA;QACAC,UAAA;QACAC,MAAA;MACA;MACAC,WAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,YAAA;MACA;QACA,SAAAN,WAAA,SAAAA,WAAA,CAAAO,KAAA;UACAlB,KAAA,CAAAmB,QAAA,CAAAC,OAAA,CAAAC,MAAA,CACA,gBACA,kBAAAV,WAAA,CAAAO,KAAA;UACA,MAAAT,UAAA,QAAAa,MAAA,CAAAC,MAAA,CAAAC,EAAA;UACA,MAAArB,QAAA,OAAAsB,QAAA;UACAtB,QAAA,CAAAuB,MAAA,mBAAAvB,QAAA,CAAAC,SAAA;UACAD,QAAA,CAAAuB,MAAA,cAAAvB,QAAA,CAAAI,IAAA;UACAJ,QAAA,CAAAuB,MAAA,cAAAvB,QAAA,CAAAG,IAAA;UACAH,QAAA,CAAAuB,MAAA,eAAAvB,QAAA,CAAAE,KAAA;UACAF,QAAA,CAAAuB,MAAA,gBAAAvB,QAAA,CAAAK,MAAA;UACAL,QAAA,CAAAuB,MAAA,gBAAAvB,QAAA,CAAAO,MAAA;UACAP,QAAA,CAAAuB,MAAA,eAAAjB,UAAA;UACAkB,OAAA,CAAAC,GAAA,CAAAzB,QAAA;UACA,MAAA0B,QAAA,SAAA7B,KAAA,CAAA8B,IAAA,CACA,kCACA3B,QACA;UACAwB,OAAA,CAAAC,GAAA,CAAAC,QAAA;UACAE,KAAA;QACA;UACAJ,OAAA,CAAAK,KAAA;QACA;MACA,SAAAA,KAAA;QACAL,OAAA,CAAAK,KAAA,gBAAAA,KAAA;QAEA,IAAAA,KAAA,CAAAH,QAAA;UACAF,OAAA,CAAAK,KAAA,mBAAAA,KAAA,CAAAH,QAAA,CAAA3B,IAAA;QACA;UACAyB,OAAA,CAAAK,KAAA,mBAAAA,KAAA,CAAAC,OAAA;QACA;QACAF,KAAA;MACA;IACA;IACAG,iBAAAC,KAAA;MACA,MAAAC,IAAA,GAAAD,KAAA,CAAAE,MAAA,CAAAC,KAAA;MACA,KAAAnC,QAAA,CAAAO,MAAA,GAAA0B,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}